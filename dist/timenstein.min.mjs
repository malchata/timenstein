var e="[Timenstein] Can't continue because the required performance APIs are not supported in this browser.",r="[Timenstein] Can't create a performance mark because a measure name wasn't given for it.",Timenstein=function(n,t){var a,i,s,m,o={},u={},c=t&&"mark"in t&&"measure"in t&&"getEntriesByName"in t&&"clearMarks"in t&&"clearMeasures"in t,f=e=>JSON.parse(JSON.stringify(e)),g=(e,r,n)=>e>=r&&e<=n,p=e=>{a&&console[i](e)};function Timenstein(r){return c?(a=(r=r||{}).errorLogging||!0,i=/^(log|warn|error)$/.test(r.errorLogLevel)?r.errorLogLevel:"warn",s=r.namespace||"timenstein",m=r.namespaceSeparator||"::",!0):(p(e),!1)}return Timenstein.prototype.mark=function(n,a){var i,u;if(a=a||!1,!c)return p(e),!1;if(!n)return p(r),!1;var g=""+s+m+n;if(g in o&&o[g].locked)return p("[Timenstein] Can't create a performance mark for the given measure name because it is locked."),!1;g in o?i=o[g].entries.length+1:(i=1,o[g]={locked:!1,entries:[]}),u=g+"-"+i,t.mark(u),a&&(o[g].locked=!0);var v=f(t.getEntriesByName(u)[0]);return o[g].entries.push(v),{markName:u,markNumber:i}},Timenstein.prototype.measure=function(n,a,i){if(!c)return p(e),!1;if(!n)return p(r),!1;var v=""+s+m+n;if(v in o==!1)return p("[Timenstein] The given measure name doesn't have any marks associated with it."),!1;var l=o[v].entries.length;if(l<2)return p("[Timenstein] The given measure name must have at least two associated marks in order to make a measurement"),!1;if(!((a=a||1)<(i=i||l)&&i>a&&g(a,1,l)&&g(i,1,l)))return p("[Timenstein] The given measurement range is not valid for the measure name given."),!1;var h=t.getEntriesByName(n+"-"+a)[0],k=t.getEntriesByName(n+"-"+i)[0];v in u==!1&&(u[v]={entries:[]}),t.measure(v,h,k);var d=f(t.getEntriesByName(v)[0]);return d.start=a,d.end=i,u[v].entries.push(d),!0},Timenstein.prototype.clear=function(e,r){if("marks"!==e&&"measures"!==e)return p('[Timenstein] When invoking the `clear` method, its sole argument must either be "marks" or "measures".'),!1;if("marks"===e||"measures"===e){var n="clear"+(e[0].toUpperCase()+e.slice(1)),a=e.substr(0,e.length-1);return t.getEntries().forEach(e=>{var i=e.entryType===a&&0===e.name.indexOf(""+s+m);r instanceof RegExp&&(i=i&&r.test(e.name)),i&&t[n](e.name)}),!0}},Timenstein.prototype.getMarks=function(){return o},Timenstein.prototype.getMeasures=function(){return u},Timenstein}(window,performance);export default Timenstein;
